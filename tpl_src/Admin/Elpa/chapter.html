<extend name="Public:base" />

<block name="title">章节管理</block>
<block name="content">
    <!-- 导航栏开始 -->
    <div class="page-header">
        <h1>
            首页
            &gt;
            Elpa
            &gt;
            <a href="{:U('Admin/Elpa/lesson')}">{$lesson_name}</a>
            &gt;
			章节管理
        </h1>
    </div>
    <div class="col-xs-12">
        <div class="tabbable">
            <ul class="nav nav-tabs padding-12 tab-color-blue background-blue" id="myTab">
			  	<li class="active">
					<a href="#home" data-toggle="tab">章节列表</a>
			    </li>
			    <li>
					<a href="javascript:;" chapterPid="{$pid}"  onclick="add(this)">添加章节</a>
				</li>
            </ul>
            <div class="tab-content">
				<table class="table table-striped table-bordered table-hover table-condensed">
					<tr>
						<th>章节编号</th>
						<th>标题</th>
						<th>描述</th>
						<th>问题</th>
						<th>答案A</th>
						<th>答案B</th>
						<th>答案C</th>
						<th>限时时间</th>
						<th>图片</th>
						<th>视频</th>
						<th>操作</th>
					</tr>
					<foreach name="data" item="v">
						<tr>
							<td>{$v['ct_number']}</td>
							<td>{$v['ct_name']}</td>
							<td>{$v['ct_desc']}</td>
							<td>{$v['ct_question']}</td>
							<td>{$v['ct_answera']}</td>
							<td>{$v['ct_answerb']}</td>
							<td>{$v['ct_answerc']}</td>
							<td>{$v['ct_answertime']}</td>
							<td><img src="{$v['ct_photo']}" width="40px" height="40px"></td>
							<td><video width='40' height="40"  controls="controls" src="{$v['ct_vedio']}">您的浏览器不支持</video></td>
							<td>
								<a href="javascript:;" chapterId="{$v['ct_id']}" chapterNumber="{$v['ct_number']}" chapterName="{$v['ct_name']}" chapterDesc="{$v['ct_desc']}" chapterQuestion="{$v['ct_question']}" chapterAnswera="{$v['ct_answera']}" chapterAnswerb="{$v['ct_answerb']}" chapterAnswerc="{$v['ct_answerc']}" chapterAnswerTime="{$v['ct_answertime']}"  onclick="edit(this)">修改</a> |
								<a href="javascript:if(confirm('确定删除？'))location='{:U('Admin/Elpa/delete_chapter',array('id'=>$v['ct_id']))}'">删除</a> 
							</td>
						</tr>
					</foreach>
				</table>
				<div class='page'>
					{$page}
				</div>
            </div>
        </div>
    </div>
    <!-- 添加菜单模态框开始 -->
	<div class="modal fade" id="bjy-add" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			 <div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						&times;
					</button>
					<h4 class="modal-title" id="myModalLabel">
						添加章节
					</h4>
				</div>
				<div class="modal-body">
					<form id="bjy-form" class="form-inline" action="{:U('Admin/Elpa/add_chapter')}" method="post" enctype="multipart/form-data">
						<input type="hidden" name="pid">
						<table class="table table-striped table-bordered table-hover table-condensed">
							<tr>
								<th width="15%">章节编号：</th>
								<td>
									<input class="input-medium" type="text" name="ct_number">
								</td>
							</tr>
							<tr>
								<th width="15%">章节名称：</th>
								<td>
									<input class="input-medium" type="text" name="ct_name">
								</td>
							</tr>
							<tr>
								<th width="15%">描述：</th>
								<td>
									<input class="input-medium" type="text" name="ct_desc">
								</td>
							</tr>
							<tr>
								<th width="15%">问题：</th>
								<td>
									<input class="input-medium" type="text" name="ct_question">
								</td>
							</tr>
							<tr>
								<th width="15%">答案A：</th>
								<td>
									<input class="input-medium" type="text" name="ct_answera">
								</td>
							</tr>
							<tr>
								<th width="15%">答案B：</th>
								<td>
									<input class="input-medium" type="text" name="ct_answerb">
								</td>
							</tr>
							<tr>
								<th width="15%">答案C：</th>
								<td>
									<input class="input-medium" type="text" name="ct_answerc">
								</td>
							</tr>
							<tr>
								<th width="15%">限时时间：</th>
								<td>
									<input class="input-medium" type="text" name="ct_answertime">
								</td>
							</tr>
							<tr>
								<th width="15%">图片: </th>
								<td>
									<input class="input-medium" type="file" name="image[]">
								</td>
							</tr>
							<tr>
								<th width="15%">视频: </th>
								<td>
									<input class="input-medium" type="file" name="image[]">
								</td>
							</tr>
							<tr>
								<th></th>
								<td>
									<input class="btn btn-success" type="submit" value="添加">
								</td>
							</tr>
						</table>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!-- 添加菜单模态框结束 -->

	<!-- 修改菜单模态框开始 -->
	<div class="modal fade" id="bjy-edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			 <div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						&times;
					</button>
					<h4 class="modal-title" id="myModalLabel">
						修改章节
					</h4>
				</div>
				<div class="modal-body">
					<form id="bjy-form" class="form-inline" action="{:U('Admin/Elpa/edit_chapter')}" method="post" enctype="multipart/form-data">
						<input type="hidden" name="id">
						<table class="table table-striped table-bordered table-hover table-condensed">
							<tr>
								<th width="15%">章节编号：</th>
								<td>
									<input class="input-medium" type="text" name="ct_number">
								</td>
							</tr>
							<tr>
								<th width="15%">章节名称：</th>
								<td>
									<input class="input-medium" type="text" name="ct_name">
								</td>
							</tr>
							<tr>
								<th width="15%">描述：</th>
								<td>
									<input class="input-medium" type="text" name="ct_desc">
								</td>
							</tr>
							<tr>
								<th width="15%">问题：</th>
								<td>
									<input class="input-medium" type="text" name="ct_question">
								</td>
							</tr>
							<tr>
								<th width="15%">答案A：</th>
								<td>
									<input class="input-medium" type="text" name="ct_answera">
								</td>
							</tr>
							<tr>
								<th width="15%">答案B：</th>
								<td>
									<input class="input-medium" type="text" name="ct_answerb">
								</td>
							</tr>
							<tr>
								<th width="15%">答案C：</th>
								<td>
									<input class="input-medium" type="text" name="ct_answerc">
								</td>
							</tr>
							<tr>
								<th width="15%">限时时间：</th>
								<td>
									<input class="input-medium" type="text" name="ct_answertime">
								</td>
							</tr>
							<tr>
								<th width="15%">图片: </th>
								<td>
									<input class="input-medium" type="file" name="image[]">
								</td>
							</tr>
							<tr>
								<th width="15%">视频: </th>
								<td>
									<input class="input-medium" type="file" name="image[]">
								</td>
							</tr>
							<tr>
								<th></th>
								<td>
									<input class="btn btn-success" type="submit" value="修改">
								</td>
							</tr>
						</table>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!-- 修改菜单模态框结束 -->
</block>
<block name="js">
	<script>
	// 添加章节
	function add(obj){
		var chapterPid=$(obj).attr('chapterPid');
		$("input[name='pid']").val(chapterPid);
		$('#bjy-add').modal('show');
	}

	// 修改菜单
	function edit(obj){
		var chapterId=$(obj).attr('chapterId');
		var chapterNumber=$(obj).attr('chapterNumber');
		var chapterName=$(obj).attr('chapterName');
		var chapterDesc=$(obj).attr('chapterDesc');
		var chapterQuestion=$(obj).attr('chapterQuestion');
		var chapterAnswera=$(obj).attr('chapterAnswera');
		var chapterAnswerb=$(obj).attr('chapterAnswerb');
		var chapterAnswerc=$(obj).attr('chapterAnswerc');
		var chapterAnswerTime=$(obj).attr('chapterAnswerTime');
		$("input[name='id']").val(chapterId);
		$("input[name='ct_number']").val(chapterNumber);
		$("input[name='ct_name']").val(chapterName);
		$("input[name='ct_desc']").val(chapterDesc);
		$("input[name='ct_question']").val(chapterQuestion);
		$("input[name='ct_answera']").val(chapterAnswera);
		$("input[name='ct_answerb']").val(chapterAnswerb);
		$("input[name='ct_answerc']").val(chapterAnswerc);
		$("input[name='ct_answertime']").val(chapterAnswerTime);
		$('#bjy-edit').modal('show');
	}
	</script>
</block>