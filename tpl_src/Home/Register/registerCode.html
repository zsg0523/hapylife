<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
    	<meta http-equiv="X-UA-Compatible" content="IE=edge">
   	 	<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>发送短信验证码</title>
		<link href="__PUBLIC_BOOTSTRAP__/css/bootstrap.css" rel="stylesheet">
		<style type="text/css">
			.wrap{width: 100%;height: 100%;}
			.main{height: 230px;border-radius: 5px;border: 3px solid #DEDEDE;margin: auto;margin-top: 50px;}
			.content{margin-top: 30px;}
			
			.input-group{width: 96%;margin: auto;margin-top: 10px;}
			
			.getCode{background-color: #439DFE;color:#fff;}
		    .getCode:hover{cursor: pointer;}
		    
		    .opt{width: auto;height: 50px;color: #000;background: #fff;font-size: 14px;}
		    .btn-info{background-color: #439DFE;}
		    
			
			    /*手机*/
      		@media screen and (max-width: 768px){
        		.main{width:90%;}
      		}
			    /*平板*/
		    @media screen and (min-width: 768px){
		     	.main{width: 400px;}
		    }
		        /*中等屏幕*/
		    @media screen and (min-width: 992px){
				.main{width: 400px;}
		    }
		      /*大屏幕*/
		    @media screen and (min-width: 1200px){
		      	.main{width: 400px;}
		    }
		</style>
	</head>
	<body>
		<div class="wrap container-fluid">
			<div class="main row">
				<div class="content">
					<form method="post" action="{:U('Home/Register/inCode')}">
						<div class="input-group">
						    <select class="form-control" name="acnumber" id="acnumber">
						    	<foreach name="data" item="v">
						    		<option  class="opt" value="{$v['acnumber']}">{$v['name']}</option>						    			
						    	</foreach>
						    </select> 
						</div>
			 			<div class="input-group">
						  	<input type="text" name="phoneNumber" id="phoneNumber" class="form-control" placeholder="请输入手机号码" aria-describedby="basic-addon1">
						</div>
						<div class="input-group"> 
						  	<input type="text" class="form-control" name="code" placeholder="请输入验证码" aria-describedby="basic-addon1">
						  	<span class="input-group-addon getCode" style="width: 30%;" id="basic-addon1" onclick="sendPhone(this);">获取验证码</span>
						</div>
						<div class="input-group">
							<button type="button" class="btn btn-info" style="width: 100%;" onclick="window.location.href='new_register.html';parent.scrollTo(0,0);">确认</button>
						</div>
		 			</form>
				</div>
		 		
			</div>
		</div>
		
		
	<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="__PUBLIC_BOOTSTRAP__/js/bootstrap.min.js"></script>
    <script type="text/javascript">
    	var countdown=60;
	function settime(val) {	
		if (countdown == 0) { 
			val.style.backgroundColor='#5bc0de';
			val.innerHTML ="获取验证码";
			countdown=60;
		} else { 
			 val.style.backgroundColor ='#999';
			val.innerHTML ="重新发送(" + countdown + ")"; 
			countdown--; 
			setTimeout(function() { settime(val) },1000);
		}

	}
	function sendPhone(obj){
		var phoneNumber=document.getElementById('phoneNumber').value;
		var acnumber=document.getElementById('acnumber').value;
//		alert(phoneNumber);alert(acnumber);
		if(countdown==60){
			$.ajax({
			type:"post",
			url:"smsCode",
			async:false,
			dataType:'json',
			data:{
				acnumber:acnumber,
				phoneNumber:phoneNumber
			},
			success:function(ret){
				if(ret.status=='101'){
				
					setTimeout(function() { settime(obj) },1000);
				}else{
					alert(ret.msg);
				}
				
			}
		});
			
		}
	}
	// 发短信验证码
    </script>
	</body>
</html>
